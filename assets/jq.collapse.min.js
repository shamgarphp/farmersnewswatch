(function(n){function t(t,i){i=i||{};var r=this,u=i.query||"> :even";n.extend(r,{$el:t,options:i,sections:[],isAccordion:i.accordion||!1,db:i.persist?jQueryCollapseStorage(t.get(0).id):!1});r.states=r.db?r.db.read():[];r.$el.find(u).each(function(){new jQueryCollapseSection(n(this),r)}),function(t){r.$el.on("click","[data-collapse-summary] "+(t.options.clickQuery||""),n.proxy(r.handleClick,t));r.$el.bind("toggle close open",n.proxy(r.handleEvent,t))}(r)}function i(t,i){i.options.clickQuery||t.wrapInner('<a href="#"/>');n.extend(this,{isOpen:!1,$summary:t.attr("data-collapse-summary",""),$details:t.next(),options:i.options,parent:i});i.sections.push(this);var r=i.states[this._index()];r===0?this.close(!0):this.$summary.is(".open")||r===1?this.open(!0):this.close(!0)}t.prototype={handleClick:function(t,i){t.preventDefault();for(var i=i||"toggle",r=this.sections,u=r.length;u--;)if(n.contains(r[u].$summary[0],t.target)){r[u][i]();break}},handleEvent:function(n){if(n.target==this.$el.get(0))return this[n.type]();this.handleClick(n,n.type)},open:function(t){if(isFinite(t))return this.sections[t].open();n.each(this.sections,function(n,t){t.open()})},close:function(t){if(isFinite(t))return this.sections[t].close();n.each(this.sections,function(n,t){t.close()})},toggle:function(t){if(isFinite(t))return this.sections[t].toggle();n.each(this.sections,function(n,t){t.toggle()})}};i.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(n){this._changeState("close",n)},open:function(t){var i=this;i.options.accordion&&!t&&n.each(i.parent.sections,function(n,t){t.close()});i._changeState("open",t)},_index:function(){return n.inArray(this,this.parent.sections)},_changeState:function(t,i){var r=this;r.isOpen=t=="open";n.isFunction(r.options[t])&&!i?r.options[t].apply(r.$details):r.$details[r.isOpen?"show":"hide"]();r.$summary.toggleClass("open",t!="close");r.$details.attr("aria-hidden",t=="close");r.$summary.attr("aria-expanded",t=="open");r.$summary.trigger(t=="open"?"opened":"closed",r);r.parent.db&&r.parent.db.write(r._index(),r.isOpen)}};n.fn.extend({collapse:function(i,r){var u=r?n("body").find("[data-collapse]"):n(this);return u.each(function(){var u=r?{}:i,f=n(this).attr("data-collapse")||"";n.each(f.split(" "),function(n,t){t&&(u[t]=!0)});new t(n(this),u)})}});n(function(){n.fn.collapse(!1,!0)});jQueryCollapse=t;jQueryCollapseSection=i})(window.jQuery);